function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _createSuper(a){var b=_isNativeReflectConstruct();return function(){var c,d=_getPrototypeOf(a);if(b){var e=_getPrototypeOf(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)},_wrapNativeSuper(a)}function _construct(){return _construct=_isNativeReflectConstruct()?Reflect.construct:function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;return d&&_setPrototypeOf(f,d.prototype),f},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _isNativeFunction(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a="undefined"==typeof globalThis?a||self:globalThis,b(a.jtl={}))})(this,function(a){'use strict';function b(a){var b;do b=a,a=a.replace(k,"");while(a!==b);return a.replace(/</g,"&lt;")}var c=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],d=["script"],e=/*#__PURE__*/function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=c.veryUnsafe,e=2<arguments.length?arguments[2]:void 0;if(_classCallCheck(this,a),"object"!==_typeof(b))throw new h("The first parameter of the JTL constructor must be a object");this.json=b,this.veryUnsafe=void 0!==d&&d,this.document=e?e:"undefined"!=typeof window&&window.document?window.document:void 0}return _createClass(a,[{key:"toHtmlString",value:function(){return new f(this.json,{veryUnsafe:this.veryUnsafe}).buildElement()}},{key:"toHtmlElement",value:function(){if(!this.document)throw new h("window.document is undefined and no document was passed into the jtl method. If you are running this in Node.JS then you will need to pass in a window.document shim into the second parameter of the jtl method.");return new g(this.json,{veryUnsafe:this.veryUnsafe},this.document).buildElement()}}]),a}(),f=/*#__PURE__*/function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=c.veryUnsafe;_classCallCheck(this,a),this.json=b,this.veryUnsafe=void 0!==d&&d}return _createClass(a,[{key:"buildElement",value:function(){return this._buildElement(this.json)}},{key:"_buildNode",value:function(a){if(a.name)return this._buildElement(a);if(!a.content)throw new i("A node must either have a name or content property or both.");return b(a.content)}},{key:"_buildElement",value:function(a){var e=this;if(d.includes(a.name)&&!this.veryUnsafe)return"";var f=[];if("string"!=typeof a.name)throw new h("_buildElement called without json.name being a string, it was: "+a.name);if(c.includes(a.name))f.push(this._buildElementOpenTag(a));else{if(f.push(this._buildElementOpenTag(a)),a.content){if("string"!=typeof a.content)throw new i("Content propery of an element must be a string.");f.push(b(a.content))}if(a.children){if(!Array.isArray(a.children))throw new i("Child property must be an array of objects");a.children.forEach(function(a){var b=e._buildNode(a);b&&f.push(b)})}f.push(this._buildElementCloseTag(a))}return f.join("")}},{key:"_buildElementOpenTag",value:function(a){return"<".concat(a.name).concat(this._buildElementAttrs(a),">")}},{key:"_buildElementCloseTag",value:function(a){return"</".concat(a.name,">")}},{key:"_buildElementAttrs",value:function(a){var b=this;return a.attrs?" "+Object.keys(a.attrs).map(function(c){if("string"!=typeof a.attrs[c])throw new i("All properties of the \"attrs\" property must by strings.");return!c.startsWith("on")||b.veryUnsafe?"".concat(c,"=\"").concat(a.attrs[c],"\""):""}).filter(function(a){return a}).join(" "):""}}]),a}(),g=/*#__PURE__*/function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=c.veryUnsafe,e=2<arguments.length?arguments[2]:void 0;_classCallCheck(this,a),this.json=b,this.veryUnsafe=void 0!==d&&d,this.document=e}return _createClass(a,[{key:"buildElement",value:function(){return this._buildElement(this.json)}},{key:"_buildNode",value:function(a){if(a.name)return this._buildElement(a);if(!a.content)throw new i("A node must either have a name or content property or both.");return this.document.createTextNode(b(a.content))}},{key:"_buildElement",value:function(a){var e=this;if(!d.includes(a.name)||this.veryUnsafe){var f=this.document.createElement(a.name);if(a.attrs){if("object"!==_typeof(a.attrs))throw new i("\"attrs\" propery of an element must be an array.");Object.keys(a.attrs).forEach(function(b){if("string"!=typeof a.attrs[b])throw new i("All properties of the \"attrs\" property must by strings.");(!b.startsWith("on")||e.veryUnsafe)&&f.setAttribute(b,a.attrs[b])})}if(!c.includes(a.name)){if(a.content){if("string"!=typeof a.content)throw new i("\"content\" propery of an element must be a string.");f.appendChild(this.document.createTextNode(b(a.content)))}if(a.children){if(!Array.isArray(a.children))throw new i("\"children\" property must be an array of objects");a.children.forEach(function(a){var b=e._buildNode(a);b&&f.appendChild(b)})}}return f}}}]),a}(),h=/*#__PURE__*/function(a){function b(a){var d;return _classCallCheck(this,b),d=c.call(this,a),d.name="JtlError",d}_inherits(b,a);var c=_createSuper(b);return b}(/*#__PURE__*/_wrapNativeSuper(Error)),i=/*#__PURE__*/function(a){function b(a){var d;return _classCallCheck(this,b),d=c.call(this,a),d.name="JtlFormatError",d}_inherits(b,a);var c=_createSuper(b);return b}(h),j="(?:[^\"'>]|\"[^\"]*\"|'[^']*')*",k=new RegExp("<(?:!--(?:(?:-*[^->])*--+|-?)|script\\b"// Special "raw text" elements whose content should be elided.
+j+">[\\s\\S]*?</script\\s*|style\\b"+j+">[\\s\\S]*?</style\\s*|/?[a-z]"// Regular name
+j+")>","gi");a.jtl=function(a,b,c){return new e(a,b,c)},Object.defineProperty(a,"__esModule",{value:!0})});
